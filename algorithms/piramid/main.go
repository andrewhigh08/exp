// Package main содержит решение математической задачи о пирамиде нечетных чисел.
// Задача: посчитать сумму чисел в n-ом ряду следующей пирамиды:
//
// Ряд 1: 1                  (Сумма: 1 = 1^3)
// Ряд 2: 3, 5                (Сумма: 8 = 2^3)
// Ряд 3: 7, 9, 11              (Сумма: 27 = 3^3)
// Ряд 4: 13, 15, 17, 19        (Сумма: 64 = 4^3)
// Ряд 5: 21, 23, 25, 27, 29      (Сумма: 125 = 5^3)
//
// Как видно из примера, сумма n-го ряда равна n^3.
package main

import (
	"fmt"
)

// sumPyramidRowFormula использует математическую закономерность для нахождения суммы.
// Это наиболее эффективный способ, работающий за O(1).
func sumPyramidRowFormula(n int) int {
	// Сумма n-го ряда пирамиды последовательных нечетных чисел всегда равна n^3.
	return n * n * n
}

// sumPyramidRowNaive вычисляет сумму "в лоб", без использования формулы.
// Этот метод нужен для демонстрации и проверки правильности формулы.
// Он генерирует числа n-го ряда и суммирует их.
func sumPyramidRowNaive(n int) int {
	// Шаг 1: Определяем, с какого числа начинается n-ый ряд.
	// Для этого нужно посчитать, сколько всего чисел было в предыдущих рядах.
	// Количество чисел в рядах с 1 по (n-1) — это сумма арифметической прогрессии 1 + 2 + ... + (n-1).
	// Формула суммы: (первый + последний) * количество / 2 = (1 + n-1) * (n-1) / 2 = n * (n-1) / 2.
	countBefore := n * (n - 1) / 2

	// Первое нечетное число в n-ом ряду — это (countBefore+1)-е нечетное число в общем ряду.
	// k-е нечетное число можно найти по формуле 2*k - 1.
	// Нам нужно (countBefore)-е нечетное число, чтобы найти следующее за ним.
	// Start-й нечетный номер = 2*(countBefore) + 1
	startNumber := countBefore*2 + 1

	// Шаг 2: Суммируем n нечетных чисел, начиная со startNumber.
	sum := 0
	currentNumber := startNumber
	for i := 0; i < n; i++ {
		sum += currentNumber
		// Переходим к следующему нечетному числу.
		currentNumber += 2
	}

	return sum
}

func main() {
	fmt.Println("Сравнение двух методов для расчета суммы ряда в пирамиде нечетных чисел:")
	fmt.Println("----------------------------------------------------------------------")
	fmt.Printf("%-5s | %-20s | %-20s | %-10s\n", "Ряд (n)", "Сумма (по формуле)", "Сумма (наивная)", "Результат")
	fmt.Println("----------------------------------------------------------------------")

	// Проверяем для рядов с 1 по 10.
	for n := 1; n <= 10; n++ {
		resultFormula := sumPyramidRowFormula(n)
		resultNaive := sumPyramidRowNaive(n)

		status := "✅"
		if resultFormula != resultNaive {
			status = "❌"
		}
		fmt.Printf("%-5d | %-20d | %-20d | %-10s\n", n, resultFormula, resultNaive, status)
	}
}
