// Package main содержит утилиту для исправления текста, набранного в неправильной раскладке клавиатуры.
// Например, 'ghbdtn' -> 'привет'.
package main

import (
	"fmt"
	"strings"
)

// substitute — это карта для транслитерации латинских символов в кириллицу
// согласно стандартной русской раскладке "ЙЦУКЕН".
// Использование рун (например, 'a') вместо их числовых кодов (97) делает код более читаемым.
var substitute = map[rune]rune{
	'q': 'й', 'w': 'ц', 'e': 'у', 'r': 'к', 't': 'е', 'y': 'н', 'u': 'г', 'i': 'ш', 'o': 'щ', 'p': 'з', '[': 'х', ']': 'ъ',
	'a': 'ф', 's': 'ы', 'd': 'в', 'f': 'а', 'g': 'п', 'h': 'р', 'j': 'о', 'k': 'л', 'l': 'д', ';': 'ж', '\'': 'э',
	'z': 'я', 'x': 'ч', 'c': 'с', 'v': 'м', 'b': 'и', 'n': 'т', 'm': 'ь', ',': 'б', '.': 'ю',
	// Заглавные буквы
	'Q': 'Й', 'W': 'Ц', 'E': 'У', 'R': 'К', 'T': 'Е', 'Y': 'Н', 'U': 'Г', 'I': 'Ш', 'O': 'Щ', 'P': 'З', '{': 'Х', '}': 'Ъ',
	'A': 'Ф', 'S': 'Ы', 'D': 'В', 'F': 'А', 'G': 'П', 'H': 'Р', 'J': 'О', 'K': 'Л', 'L': 'Д', ':': 'Ж', '"': 'Э',
	'Z': 'Я', 'X': 'Ч', 'C': 'С', 'V': 'М', 'B': 'И', 'N': 'Т', 'M': 'Ь', '<': 'Б', '>': 'Ю',
}

// fixText исправляет текст, ошибочно набранный в латинской раскладке.
// Функция итерируется по рунам входной строки и заменяет их согласно карте `substitute`.
func fixText(input string) string {
	// Использование strings.Builder — это наиболее эффективный способ построения строк в Go.
	// В отличие от конкатенации через `+=`, Builder не создает новую строку на каждой итерации,
	// а работает с внутренним байтовым буфером, что значительно снижает количество аллокаций памяти.
	var builder strings.Builder
	// Предварительно выделяем память, чтобы избежать реаллокаций в процессе.
	// Это необязательная, но полезная оптимизация.
	builder.Grow(len(input))

	for _, char := range input {
		// Проверяем, есть ли для текущего символа замена в нашей карте.
		if newChar, ok := substitute[char]; ok {
			// Если замена найдена, добавляем ее в builder.
			builder.WriteRune(newChar)
		} else {
			// Если символ не найден в карте (например, это уже кириллица, пробел или цифра),
			// добавляем его без изменений.
			builder.WriteRune(char)
		}
	}
	// Возвращаем собранную строку.
	return builder.String()
}

func main() {
	// Примеры для демонстрации
	fmt.Printf("'ghbdtn' -> '%s'\n", fixText("ghbdtn"))    // привет
	fmt.Printf("'не нflо' -> '%s'\n", fixText("не нflо"))  // не надо
	fmt.Printf("'kexшиq' -> '%s'\n", fixText("kexшиq"))    // лучший
	fmt.Printf("'Ghbdtn, Vbh!' -> '%s'\n", fixText("Ghbdtn, Vbh!")) // Привет, Мир!
	fmt.Printf("'норм' -> '%s'\n", fixText("норм"))      // норм (без изменений)
}
