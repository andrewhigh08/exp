// Package main — это задача-головоломка, демонстрирующая работу ключевого слова `fallthrough`
// в конструкции `switch` в языке Go.
package main

import "fmt"

// --- УСЛОВИЕ ЗАДАЧИ ---
/*
Дана функция `sw` и вызовы в `main`.
Необходимо изменить ТОЛЬКО тело функции `sw`, чтобы итоговый вывод программы был:
1
-
2
-
3
-
1
2
3

При этом действуют строгие ограничения:
- Нельзя удалять или добавлять `case`.
- Нельзя использовать `default`.
- Нельзя добавлять в функцию `sw` другие инструкции, кроме `switch`.
  (вся логика должна быть внутри `case`).
*/

// sw — функция, демонстрирующая решение головоломки.
func sw(v int) {
	// В Go, в отличие от C/C++, каждый `case` в `switch` имеет неявный `break` в конце.
	// Выполнение не "проваливается" в следующий `case` автоматически.
	// Ключевое слово `fallthrough` используется для явного указания, что нужно
	// передать управление следующему `case` БЕЗ проверки его условия.
	switch v {
	case 1, 10:
		// Этот кейс срабатывает для v=1 и v=10.
		fmt.Println("1")
		// Этот `if` — ключ к решению.
		// Если v не равно 10 (т.е. v=1), мы вызываем `break`, который немедленно
		// прекращает выполнение всего `switch`.
		if v != 10 {
			break
		}
		// Если же v равно 10, `break` не срабатывает, и мы "проваливаемся"
		// в следующий `case` благодаря `fallthrough`.
		fallthrough
	case 2:
		// Этот кейс срабатывает либо для v=2, либо при "проваливании" из `case 1`.
		fmt.Println("2")
		// Аналогичный гвард: если v не 10 (т.е. v=2), выходим из `switch`.
		// Если v=10, мы продолжаем "проваливаться".
		if v != 10 {
			break
		}
		fallthrough
	case 3:
		// Этот кейс сработает для v=3 или при "проваливании" из `case 2`.
		fmt.Println("3")
		// Здесь неявный `break`, `switch` завершается.
	}
}

func main() {
	// sw(1): v=1, срабатывает `case 1`, печатает "1", `if` истинен, `break`.
	sw(1)
	fmt.Println("-")
	// sw(2): v=2, срабатывает `case 2`, печатает "2", `if` истинен, `break`.
	sw(2)
	fmt.Println("-")
	// sw(3): v=3, срабатывает `case 3`, печатает "3", `switch` завершается.
	sw(3)
	fmt.Println("-")
	// sw(10): v=10, срабатывает `case 1`, печатает "1", `if` ложен, `fallthrough`.
	// Переходит в `case 2`, печатает "2", `if` ложен, `fallthrough`.
	// Переходит в `case 3`, печатает "3", `switch` завершается.
	sw(10)
}
